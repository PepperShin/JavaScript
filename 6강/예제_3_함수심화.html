<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>

        // 함수 리턴
        function func1() {

            // 반드시 익명함수 형태여야 한다.
            return function (x){
                for(let i = 1; i < 10; i++){
                    document.write(x + ' * ' + i + ' = ' + (x * i));
                }
            }
        }

        let returnFunc = func1();
        returnFunc(4);

        document.write('<hr>');

        //클로저(closure)
        //: free variable(자유변수)에 의해서 함수가 닫혀(closed)있다.

        function funName(x) {
            var varName = ':: 요청한 ' + x + '에 대한 구구단 ::<br>';

            return function () {
                document.write(varName);
                for (var i = 1; i < 10; i++) {
                    document.write(x + ' * ' + i + ' = ' + x * i + '<br>');
                }
            };
        }

        //지역변수에 접근할 수 없다.(에러 발생)
        //console.log("varName : " + varName);

        returnFun = funName(5); 
        // 이때 파라미터 x의 메모리공간이 생성되고 returnFun이 호출되기 전까지 사라지지 않는다.
        returnFun();
        returnFun();


        /*
            내부함수
            : 함수안에 또다른 함수
        */

        function outFun(width, height){

            console.log("triangle : " + triangle());
            console.log("quadrangle : " + quadrangle());

            //삼각형 면적 계산
            function triangle() {
        
                return (width * height) / 2;

            }

            //사각형 면적 계산
            function quadrangle() {

                return width * height;

            }

        }

        outFun(3, 5);

        //triangle(); 함수안의 함수는 직접 호출은 안된다.


        function test(kor, eng, math){
            console.log('총점:' + sum());
            console.log('평균:' + avg());

            function sum(){
                return kor + eng + math;
            }

            function avg(){
                return sum() / 3 ;
            }
        }

        test(90, 70, 80);


    </script>
</head>
<body>
    
</body>
</html>